<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link type="application/opensearchdescription+xml" rel="search" href="opensearch.xml"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><style data-href="/styles.1025963f4f2ec7abbad4.css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-4124805c0503dbfe42dd67d7f5715964.woff2) format("woff2"),url(/static/montserrat-latin-100-c8fb2f714bbc7bc3e8dfffa916b286dc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e4bf47bd171a9b2a72dd84c58bf90edf.woff2) format("woff2"),url(/static/montserrat-latin-100italic-d1f3f2d02ee4d7d2d4b1ad865014f189.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-444ae007121264bc1969d49b4031f9b2.woff2) format("woff2"),url(/static/montserrat-latin-200-edbce16a90aa22c297a0307b85789837.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-f316c5d1ec40f3e68654c3f38b3999f3.woff2) format("woff2"),url(/static/montserrat-latin-200italic-d7bbb730d9b5e11720b3eb32326dcca7.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-0a7c6df06e85d978d096d4d18fd8d43d.woff2) format("woff2"),url(/static/montserrat-latin-300-5e86df2cad22d2ef2b03516334afae5e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-c076c4892bc7a4be7b9097e97a35012d.woff2) format("woff2"),url(/static/montserrat-latin-300italic-37c74a8d2d0d36a0a2c6e9a37ee15b0c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-501ce09c42716a2f6e1503a25eb174c9.woff2) format("woff2"),url(/static/montserrat-latin-400-f29d2b8559699b6beb5b29b25b8bc572.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-882908d9950d9c86ebd380877f293d95.woff2) format("woff2"),url(/static/montserrat-latin-400italic-22e7b04e5f2a901d49d4d342315a715a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-f0f2716c5fe401d175b88715e7d28685.woff2) format("woff2"),url(/static/montserrat-latin-500-991b453bf90a0980e78966d2af7e3d3a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-4590ebba421b3288c305305d7fa7b504.woff2) format("woff2"),url(/static/montserrat-latin-500italic-f3d41e4cdcc2314e49ddcea751d6f87f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-15c24f7109941777774ddd2c636c6a50.woff2) format("woff2"),url(/static/montserrat-latin-600-f6dc6096f48956908c1787d9a722570a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-6d10b80529d5c36c7c09fca7193af0fc.woff2) format("woff2"),url(/static/montserrat-latin-600italic-02c4833312d94b1b0866f073023a250e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-79982cd1f74c6fa7451bf9b37ead09ff.woff2) format("woff2"),url(/static/montserrat-latin-700-957e93fbbe131a59791cd820d98b7109.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-283438e9577fe6a684466bb100e105ec.woff2) format("woff2"),url(/static/montserrat-latin-700italic-ca627c5ccc65cf80c2ecaea44b997de9.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-35386154b78d046218fc8f88a44ff515.woff2) format("woff2"),url(/static/montserrat-latin-800-756655905d91b77960888262e7d58d35.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-e1b52a7bd83e2324db6d92bdc206844c.woff2) format("woff2"),url(/static/montserrat-latin-800italic-a69f0add9d86c1a84311d7dd8693ba4a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-260c2ea3ef57feb82251952e605a36d5.woff2) format("woff2"),url(/static/montserrat-latin-900-186cae8091da578150d81958e217714a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-d785fb9fc74588ffb7f306799709a97d.woff2) format("woff2"),url(/static/montserrat-latin-900italic-43b527fe77254f97ea36e2b54e845ec4.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}</style><meta name="generator" content="Gatsby 2.24.47"/><style data-styled="bLjJFj iJYFku" data-styled-version="4.4.1">
/* sc-component-id: layout__Wrapper-sc-9m4ty6-0 */
.bLjJFj{min-height:100vh;}
/* sc-component-id: layout__Footer-sc-9m4ty6-1 */
.iJYFku{text-align:center;margin:24px;}</style><title data-react-helmet="true">Best Practices to Avoid Memory Leaks | Personal Blog</title><meta data-react-helmet="true" name="description" content="Best Practices to Avoid Memory Leaks in Node.js"/><meta data-react-helmet="true" property="og:title" content="Best Practices to Avoid Memory Leaks"/><meta data-react-helmet="true" property="og:description" content="Best Practices to Avoid Memory Leaks in Node.js"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Amod Shinde"/><meta data-react-helmet="true" name="twitter:title" content="Best Practices to Avoid Memory Leaks"/><meta data-react-helmet="true" name="twitter:description" content="Best Practices to Avoid Memory Leaks in Node.js"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a" type="image/png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link as="script" rel="preload" href="/webpack-runtime-135b076f0a52104abbea.js"/><link as="script" rel="preload" href="/framework-b5b229d58c3c710d5429.js"/><link as="script" rel="preload" href="/styles-24c541b6ac347bae38f1.js"/><link as="script" rel="preload" href="/532a2f07-b733363b3c2692f0ab8d.js"/><link as="script" rel="preload" href="/app-2c32a23c9fdae511377a.js"/><link as="script" rel="preload" href="/92c71b40fabf116e9c1437d16baee1f61fa514e3-c06e015ee5e1c74082ee.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-5d0239888b1c6797a6b1.js"/><link as="fetch" rel="preload" href="/page-data/blog/avoid-memory-leaks/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout__Wrapper-sc-9m4ty6-0 bLjJFj"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header><h3 style="font-family:Montserrat, sans-serif;margin-top:0"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/blog/">Personal Blog</a></h3></header><main><h1>Best Practices to Avoid Memory Leaks</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem">December 02, 2020</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:590px">
      <a class="gatsby-resp-image-link" href="/static/0b9f556872747c35dbab92fafb0777fc/84ee5/header.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:54.72972972972974%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACCklEQVQoz5WTS2sTYRSGP11UF/4INxYv2y4EoUVE7M6lK287f0CtIO4El4KCO3EhVIpYEDfVxrbTGnpJxHQaSpuiaTMzmcx90sZWqJ08nnyxKK7sgYdzXs5wZr7zfqPQ0Rb2+RN/14cLlcYRSbJNnO6TRi5JnBI3M52TOBaSQ6HceoRXW6b15Sa7hUFNUn5I3a5Rd+q4Qt12BFu009WSD+p/tfLtNfbmTkNOkVaes7d4HhZ6ib2YyEvw3Qaxnwip6Ai/4RFKDhsxQcPXhPJs2Ih0rbbLd+Gjoj3TQ3v2BLvzfZirE5jr8yyvF9i0apQqc5gVg/LXEpZt8a1WplozpVcVNkWbopd1rX4UL8OUDJxWMHuc6voMNx7f5tJwL3ee3KKw8plrjwa5OHyG+y+GyBVzXHnQx4WhUzx795TR6RH6h88ycO8cryZHUDul6zApA40eMBStwlWMhTzj+U/kC3k2NjaYmp9hfDbHYqnIWmWVsdxbRt+/obhUxFxZ4vWHMY25YqKi6oQMO9L9SuOoHk6pn1Zok4ZN2aFLM0zYisT9oLNDn1a8xXe5GZEfyv4CXR9o5bpN4spL9vIn9bEz4xg7CwO4m0s4jqfddazfdJwWx23L0nTd7+pOX7sc+h5BuCNvskgtg8RZJAi2hZTAk57n/zehH6CyLKOd/SRrd/+PTm5n+2Sa7ND8AjV6BV6hj2c2AAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Logging in Node.js" title="Logging in Node.js" src="/static/0b9f556872747c35dbab92fafb0777fc/fcda8/header.png" srcSet="/static/0b9f556872747c35dbab92fafb0777fc/12f09/header.png 148w,/static/0b9f556872747c35dbab92fafb0777fc/e4a3f/header.png 295w,/static/0b9f556872747c35dbab92fafb0777fc/fcda8/header.png 590w,/static/0b9f556872747c35dbab92fafb0777fc/efc66/header.png 885w,/static/0b9f556872747c35dbab92fafb0777fc/84ee5/header.png 1076w" sizes="(max-width: 590px) 100vw, 590px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p><p>In the Previous Blog (add a link to blog ) we understood the Memory management in Node.js, how Garbage Collector (GC) works and what are the possible caused of memory leaks despite GC playing a crucial role. In this blog, let’s look at best practices to ensure efficient memory use in Node.js.</p><h2>1. REDUCE USE OF GLOBAL VARIABLES</h2><p>Since global variables are never garbage collected, it’s best to ensure you don’t overuse them.
In javascript particularly you need to keep in mind certain aspects to reduce global variables </p><h4>1. Avoid Accidental Globals</h4><p>In Javascript, if you assign a value to an undeclared variable, Javascript automatically hoists it as a global variable in default mode. Also, this goes the same with the word ‘this’ used in functions in the global scope.</p><p>Examples:</p><pre class="grvsc-container default-dark" data-language="javascript" data-index="0"><code class="grvsc-code"><span class="grvsc-line"><span class="mtk4">function</span><span class="mtk1"> </span><span class="mtk11">apple</span><span class="mtk1">() {</span></span>
<span class="grvsc-line"><span class="mtk1">	</span><span class="mtk12">red</span><span class="mtk1"> = </span><span class="mtk4">true</span><span class="mtk1">; </span><span class="mtk3">// this red variable gets hoisted in global space</span></span>
<span class="grvsc-line"><span class="mtk1">}</span></span>
<span class="grvsc-line"></span>
<span class="grvsc-line"><span class="mtk4">function</span><span class="mtk1"> </span><span class="mtk11">mango</span><span class="mtk1">() {</span></span>
<span class="grvsc-line"><span class="mtk3">// since &#x27;this&#x27; in global functions refers to global this varible is hoisted in global space</span></span>
<span class="grvsc-line"><span class="mtk4">this</span><span class="mtk1">.</span><span class="mtk12">type</span><span class="mtk1"> = </span><span class="mtk8">&quot;Alphanso&quot;</span><span class="mtk1">;  </span></span>
<span class="grvsc-line"><span class="mtk1">}</span></span></code></pre><p><strong>Solution:</strong> It is helpful to write javascript in a strict mode with ‘use strict’ annotation at the top of the JS file. In newer versions of Node.js you can globally enable strict mode by passing ’- - use_strict ’ flag when running node command.</p><pre class="grvsc-container default-dark" data-language="javascript" data-index="1"><code class="grvsc-code"><span class="grvsc-line"><span class="mtk8">&#x27;use strict&#x27;</span></span>
<span class="grvsc-line"></span>
<span class="grvsc-line"><span class="mtk4">function</span><span class="mtk1"> </span><span class="mtk11">apple</span><span class="mtk1">() {</span></span>
<span class="grvsc-line"><span class="mtk1">	</span><span class="mtk12">red</span><span class="mtk1"> = </span><span class="mtk4">true</span><span class="mtk1">; </span><span class="mtk3">// this will throw an error</span></span>
<span class="grvsc-line"><span class="mtk1">}</span></span>
<span class="grvsc-line"></span>
<span class="grvsc-line"><span class="mtk4">function</span><span class="mtk1"> </span><span class="mtk11">mango</span><span class="mtk1">() {</span></span>
<span class="grvsc-line"><span class="mtk3">// this function will have its own scope for &#x27;this&#x27;</span></span>
<span class="grvsc-line"><span class="mtk4">this</span><span class="mtk1">.</span><span class="mtk12">type</span><span class="mtk1"> = </span><span class="mtk8">&quot;Alphanso&quot;</span><span class="mtk1">;  </span></span>
<span class="grvsc-line"><span class="mtk1">}</span></span></code></pre><p><strong>Caution:</strong>  Be careful when you use arrow functions though, because even in use strict mode ‘this’ in arrow function will be in global space</p><pre class="grvsc-container default-dark" data-language="javascript" data-index="2"><code class="grvsc-code"><span class="grvsc-line"><span class="mtk3">// This will also become a global variable as arrow functions</span></span>
<span class="grvsc-line"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk11">plantation</span><span class="mtk1"> = () </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span>
<span class="grvsc-line"><span class="mtk1">    </span><span class="mtk4">this</span><span class="mtk1">.</span><span class="mtk12">coconut</span><span class="mtk1"> = </span><span class="mtk8">&quot;Brown&quot;</span><span class="mtk1">;</span></span>
<span class="grvsc-line"><span class="mtk1">}</span></span></code></pre><p><strong>solution:</strong> use the no-invalid-this rule from ESLint to avoid such cases.</p><p>Use global scope wisely :</p><ul><li>As much as possible don’t use the global scope, make the best use of local scope inside the functions, as that will be garbage collected and will keep memory free.</li><li>Try to define only constants, cache and reusable variables in global. Mark variables as null whenever the values are not needed.</li><li>Do not use global space as a medium to pass values from one function to other, use function parameters instead.</li><li>Dont store big objects in global scope. If you have to store them, then nullify them when when not needed. Dont let cache objects grow indefinitely , cleaup once and while.</li></ul><h4>2. Use Stack Memory Effectively</h4><p>Accessing stack is much faster than accessing heap memory, hence try to use stack variables more frequently than their counter parts. This also ensures we don’t accidentally cause memory leaks. Ofcourse in real world scenario its impossible to create a usable application by only using static data. But we can follow some tricks to make better use of stack.</p><ol><li>Avoid heap object references from stack variables when possible. Also, don’t keep unused variables.</li><li>Destructure and use fields needed from an object or array rather than passing around entire objects/arrays to functions. This avoids keeping a reference to objects inside closures.</li></ol><pre class="grvsc-container default-dark" data-language="javascript" data-index="3"><code class="grvsc-code"><span class="grvsc-line"><span class="mtk4">function</span><span class="mtk1"> </span><span class="mtk11">outer</span><span class="mtk1">() {</span></span>
<span class="grvsc-line"><span class="mtk1">    </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">obj</span><span class="mtk1"> = {</span></span>
<span class="grvsc-line"><span class="mtk1">        </span><span class="mtk12">foo:</span><span class="mtk1"> </span><span class="mtk7">1</span><span class="mtk1">,</span></span>
<span class="grvsc-line"><span class="mtk1">        </span><span class="mtk12">bar:</span><span class="mtk1"> </span><span class="mtk8">&quot;hello&quot;</span><span class="mtk1">,</span></span>
<span class="grvsc-line"><span class="mtk1">    };</span></span>
<span class="grvsc-line"></span>
<span class="grvsc-line"><span class="mtk1">    </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">closure</span><span class="mtk1"> = () {</span></span>
<span class="grvsc-line"><span class="mtk1">        const { </span><span class="mtk12">foo</span><span class="mtk1"> } = </span><span class="mtk12">obj</span><span class="mtk1">;</span></span>
<span class="grvsc-line"><span class="mtk1">        </span><span class="mtk11">myFunc</span><span class="mtk1">(</span><span class="mtk12">foo</span><span class="mtk1">);</span></span>
<span class="grvsc-line"><span class="mtk1">    }</span></span>
<span class="grvsc-line"><span class="mtk1">}</span></span>
<span class="grvsc-line"></span>
<span class="grvsc-line"><span class="mtk4">function</span><span class="mtk1"> </span><span class="mtk11">myFunc</span><span class="mtk1">(</span><span class="mtk12">foo</span><span class="mtk1">) {}</span></span></code></pre><h4>3. Use Heap Memory Effectively</h4><p>In real world applications it is quite impossible to completely avoid using heap memory but we can make it more efficient by following few tips:</p><ol><li>copy objects instead of referencing them. Pass the reference only if the object is huge and copy operation is expensive. </li><li>Avoid object mutations as much as possible, instead use object spread or object.assign and create a copy.</li><li>Avoid creating multiple references to the same object</li><li>Avoid creating huge object trees else keep them short lived</li></ol><p>Use APM to track your heap memory usage.</p><h4>4. Be Cautious when using Closures, Timers &amp; Event Handlers</h4><p>For timers always remember to pass copies of objects to avoid mutations and clear timers when done using clearTimeout and clearInterval methods. </p><p>Also clear listeners once the job is done, don’t keep them running forever. In cases where they are holding on to object reference from parent scope.</p><style class="grvsc-styles">
  .grvsc-container {
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
  }
  
  .grvsc-code {
    display: inline-block;
    min-width: 100%;
  }
  
  .grvsc-line {
    display: inline-block;
    box-sizing: border-box;
    width: 100%;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-line-highlighted {
    background-color: var(--grvsc-line-highlighted-background-color, transparent);
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, transparent);
  }
  
  .default-dark {
    background-color: #1E1E1E;
    color: #D4D4D4;
  }
  .default-dark .mtk4 { color: #569CD6; }
  .default-dark .mtk1 { color: #D4D4D4; }
  .default-dark .mtk11 { color: #DCDCAA; }
  .default-dark .mtk12 { color: #9CDCFE; }
  .default-dark .mtk3 { color: #6A9955; }
  .default-dark .mtk8 { color: #CE9178; }
  .default-dark .mtk7 { color: #B5CEA8; }
</style><hr style="margin-bottom:1.75rem"/><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/blog/nodejs-logging/">← <!-- -->Best Practices for Logging in Node.js</a></li><li><a rel="next" href="/blog/react-use-effect/">useEffect() in ReactJs<!-- --> →</a></li></ul></main></div><footer class="layout__Footer-sc-9m4ty6-1 iJYFku">© <!-- -->2021<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a> | Credits : <a href="https://github.com/thomaswangio">@thomaswangio</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/avoid-memory-leaks/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-0a39bea4c250b829977c.js"],"app":["/app-2c32a23c9fdae511377a.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-0097d26fbd474b34ff9b.js"],"component---src-pages-404-js":["/component---src-pages-404-js-a5e4c9d29149fe058521.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-5b89ae1942136b22439f.js"],"component---src-pages-index-js":["/component---src-pages-index-js-d90c72f90327149a3461.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-5d0239888b1c6797a6b1.js"]};/*]]>*/</script><script src="/polyfill-0a39bea4c250b829977c.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-5d0239888b1c6797a6b1.js" async=""></script><script src="/92c71b40fabf116e9c1437d16baee1f61fa514e3-c06e015ee5e1c74082ee.js" async=""></script><script src="/app-2c32a23c9fdae511377a.js" async=""></script><script src="/532a2f07-b733363b3c2692f0ab8d.js" async=""></script><script src="/styles-24c541b6ac347bae38f1.js" async=""></script><script src="/framework-b5b229d58c3c710d5429.js" async=""></script><script src="/webpack-runtime-135b076f0a52104abbea.js" async=""></script></body></html>